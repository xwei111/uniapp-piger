(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/guestFirst/index"],{1662:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("1ca8")),o=n("b84f");function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){n.e("components/self-bg").then(function(){return resolve(n("1776"))}.bind(null,n)).catch(n.oe)},a=function(){n.e("components/self-content").then(function(){return resolve(n("9c7f"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/self-steps").then(function(){return resolve(n("487e"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/self-button").then(function(){return resolve(n("a768"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/self-input").then(function(){return resolve(n("38ff"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/self-checkbox").then(function(){return resolve(n("25d4"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/self-agree").then(function(){return resolve(n("2850"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/self-radio").then(function(){return resolve(n("4c53"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("components/timer/index").then(function(){return resolve(n("8b3d"))}.bind(null,n)).catch(n.oe)},p={data:function(){return{lists:[{id:1,text:"验证手机号"},{id:2,text:"完善个人信息"},{id:3,text:"完善来访信息"}],active:1,chekck:!1,isShow:!1,options:[{id:1,label:"个人访客"},{id:2,label:"企业访客"}],visitorType:1,array:["观摩","学习","请教"],index:0,address:["猪场A","猪场B","猪场C"],idx:0,visitDate:"",phone:"",smsCode:"",name:"",idNo:"",companyName:"",number:60,isBegin:!1,accompanying:[],accShow:!1,othserUser:"",othserSfz:""}},components:{selfBg:c,selfContent:a,selfSteps:r,selfButton:h,selfInput:u,selfCheckbox:l,selfAgree:f,selfRadio:d,timer:v},onLoad:function(e){console.log("options-------------",e);var t=e.type;if(t&&"change"==t)return this.active=3,this.visitorType=2,this.accompanying=[{user:"aa",idNo:"222222222"}],this.index=1,this.companyName="浙江科技",this.visitDate="2020-05-08 11:11:10",void(this.idx=1);var n=i.default.getCurrentTimes(),o=[];for(var s in n.detail)if(o.push(n.detail[s]),s===this.fields)break;this.visitDate=i.default.format(o)},methods:{nextClick:function(){var t=this;if(1==this.active){if(!this.phone)return void e.showToast({title:"请输入手机号",icon:"none"});if(!/^\d{11}$/.test(this.phone))return void e.showToast({title:"手机格式错误",icon:"none"});if(!this.smsCode)return void e.showToast({title:"请输入验证码",icon:"none"});(0,o.guestFirst)({phone:this.phone,smsCode:this.smsCode}).then((function(e){e.success&&(t.active=++t.active)}))}if(2==this.active){if(!this.name)return void e.showToast({title:"请输入姓名",icon:"none"});if(!this.idNo)return void e.showToast({title:"请输入身份证",icon:"none"});(0,o.guestSecond)({phone:this.phone,idNo:this.idNo,name:this.name}).then((function(e){e.success&&(t.active=++t.active)}))}if(3==this.active){if(2==this.visitorType&&!this.companyName)return void e.showToast({title:"请输入企业名称",icon:"none"});if(!this.chekck)return void e.showToast({title:"请阅读用户协议",icon:"none"});console.log("login",this.phone,this.smsCode,this.name,this.idNo,this.visitorType,this.companyName,this.accompanying,this.array[this.index],this.address[this.idx],this.visitDate);var n={visitorType:this.visitorType,visitors:this.accompanying,jsonParams:JSON.stringify({reason:this.array[this.index],companyName:this.companyName,visitDate:this.visitDate,targetLocation:this.address[this.idx],phone:this.phone}),phone:this.phone};(0,o.guestThree)(n).then((function(t){t.success&&e.navigateTo({url:"/pages/guestInfo/index"})}))}},selectHandle:function(){this.chekck=!this.chekck},agreeHandle:function(){this.isShow=!0},closeHandle:function(){this.isShow=!1},changeHandle:function(e){this.visitorType=e.id},bindPickerChange:function(e){this.index=e.target.value},addressChange:function(e){this.idx=e.target.value},bindChange:function(e){this.visitDate=e},getCodeHandle:function(){var t=this;this.isBegin||(this.isBegin=!0,setInterval((function(){t.number=--t.number,t.number<0&&(t.number=60,t.isBegin=!1)}),1e3),(0,o.guestGetTellCode)({phone:this.phone}).then((function(t){console.log("eeee",t),t.success||4107!=t.code||e.showModal({title:"很抱歉",content:"暂无找到该手机号关联的邀请请联系邀请人核实信息",showCancel:!1,confirmColor:"#02BB00"})})))},addUserHandle:function(){this.accShow=!0},addHandle:function(){this.othserUser?this.othserSfz?(this.accompanying.push({name:this.othserUser,idNo:this.othserSfz}),this.othserUser="",this.othserSfz="",this.accShow=!1):e.showToast({title:"请输入身份证",icon:"none"}):e.showToast({title:"请输入姓名",icon:"none"})},deleteHandle:function(e,t){this.accompanying.splice(t,1)},toWorkHandle:function(){e.navigateTo({url:"/pages/workLogin/index"})}}};t.default=p}).call(this,n("543d")["default"])},"4b9c":function(e,t,n){"use strict";n.r(t);var i=n("1662"),o=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},5915:function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement;e._self._c},s=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}))},"66ee":function(e,t,n){},8255:function(e,t,n){"use strict";var i=n("66ee"),o=n.n(i);o.a},"840a":function(e,t,n){"use strict";(function(e){n("c797");i(n("66fd"));var t=i(n("9e11"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"9e11":function(e,t,n){"use strict";n.r(t);var i=n("5915"),o=n("4b9c");for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);n("8255");var c,a=n("f0c5"),r=Object(a["a"])(o["default"],i["b"],i["c"],!1,null,"24027e08",null,!1,i["a"],c);t["default"]=r.exports}},[["840a","common/runtime","common/vendor"]]]);