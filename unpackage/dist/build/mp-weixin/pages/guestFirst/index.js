(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/guestFirst/index"],{a2f7:function(e,t,n){"use strict";n.r(t);var i=n("e727"),o=n("ae25");for(var s in o)"default"!==s&&function(e){n.d(t,e,(function(){return o[e]}))}(s);n("b7ef");var a,c=n("f0c5"),r=Object(c["a"])(o["default"],i["b"],i["c"],!1,null,"7cb53c37",null,!1,i["a"],a);t["default"]=r.exports},ae25:function(e,t,n){"use strict";n.r(t);var i=n("aeb2"),o=n.n(i);for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);t["default"]=o.a},aeb2:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=s(n("90c3")),o=n("fe00");function s(e){return e&&e.__esModule?e:{default:e}}var a=function(){n.e("components/self-bg").then(function(){return resolve(n("d3d9"))}.bind(null,n)).catch(n.oe)},c=function(){n.e("components/self-content").then(function(){return resolve(n("6a0b"))}.bind(null,n)).catch(n.oe)},r=function(){n.e("components/self-steps").then(function(){return resolve(n("1052"))}.bind(null,n)).catch(n.oe)},u=function(){n.e("components/self-button").then(function(){return resolve(n("a566"))}.bind(null,n)).catch(n.oe)},h=function(){n.e("components/self-input").then(function(){return resolve(n("051f"))}.bind(null,n)).catch(n.oe)},f=function(){n.e("components/self-checkbox").then(function(){return resolve(n("384d"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/self-agree").then(function(){return resolve(n("f519"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/self-radio").then(function(){return resolve(n("4c24"))}.bind(null,n)).catch(n.oe)},v=function(){n.e("components/timer/index").then(function(){return resolve(n("97be"))}.bind(null,n)).catch(n.oe)},p={data:function(){return{lists:[{id:1,text:"验证手机号"},{id:2,text:"完善个人信息"},{id:3,text:"完善来访信息"}],active:1,chekck:!1,isShow:!1,options:[{id:1,label:"个人访客"},{id:2,label:"企业访客"}],visitorType:1,array:["观摩","学习","请教"],index:0,address:["猪场A","猪场B","猪场C"],idx:0,visitDate:"",phone:"",smsCode:"",name:"",idNo:"",companyName:"",number:60,isBegin:1,accompanying:[],accShow:!1,othserUser:"",othserSfz:"",type:null}},components:{selfBg:a,selfContent:c,selfSteps:r,selfButton:u,selfInput:h,selfCheckbox:f,selfAgree:d,selfRadio:l,timer:v},onLoad:function(e){if(e&&e.detail){var t=JSON.parse(e.detail),n=t.type,o=t.visitorType,s=t.visitors,a=t.reason,c=t.companyName,r=t.visitDate,u=t.targetLocation,h=(t.phone,t.mainVisitors);if(this.type=n,n&&"change"==n)return this.active=3,this.visitorType=o,this.accompanying=s,this.index=this.array.findIndex((function(e){return e===a})),this.companyName=c,this.visitDate=r,this.idx=this.address.findIndex((function(e){return e===u})),this.phone="13738051234",this.name=h[0].name,void(this.idNo=h[0].idNo)}var f=i.default.getCurrentTimes(),d=[];for(var l in f.detail)if(d.push(f.detail[l]),l===this.fields)break;this.visitDate=i.default.format(d)},methods:{nextClick:function(){var t=this;if(1==this.active){if(!this.phone)return void e.showToast({title:"请输入手机号",icon:"none"});if(!/^\d{11}$/.test(this.phone))return void e.showToast({title:"手机格式错误",icon:"none"});if(!this.smsCode)return void e.showToast({title:"请输入验证码",icon:"none"});(0,o.guestFirst)({phone:this.phone,smsCode:this.smsCode}).then((function(e){e.success&&(t.active=++t.active)}))}if(2==this.active){if(!this.name)return void e.showToast({title:"请输入姓名",icon:"none"});if(!this.idNo)return void e.showToast({title:"请输入身份证",icon:"none"});(0,o.guestSecond)({phone:this.phone,idNo:this.idNo,name:this.name}).then((function(e){e.success&&(t.active=++t.active)}))}if(3==this.active){if(2==this.visitorType&&!this.companyName)return void e.showToast({title:"请输入企业名称",icon:"none"});if(!this.chekck)return void e.showToast({title:"请阅读用户协议",icon:"none"});var n={visitorType:this.visitorType,visitors:this.accompanying,reason:this.array[this.index],companyName:this.companyName,visitDate:this.visitDate,targetLocation:this.address[this.idx],phone:this.phone};"change"!==this.type&&(0,o.guestThree)(n).then((function(i){n.mainVisitors=[{name:t.name,idNo:t.idNo}],i.success&&e.navigateTo({url:"/pages/guestInfo/index?detail=".concat(JSON.stringify(n))})})),"change"===this.type&&(0,o.changeGuestThree)(n).then((function(i){n.mainVisitors=[{name:t.name,idNo:t.idNo}],i.success&&e.navigateTo({url:"/pages/guestInfo/index?detail=".concat(JSON.stringify(n))})}))}},selectHandle:function(){this.chekck=!this.chekck},agreeHandle:function(){this.isShow=!0},closeHandle:function(){this.isShow=!1},changeHandle:function(e){this.visitorType=e.id,this.companyName=""},bindPickerChange:function(e){this.index=e.target.value},addressChange:function(e){this.idx=e.target.value},bindChange:function(e){this.visitDate=e},getCodeHandle:function(){var t=this;1==this.isBegin&&(this.isBegin=2,(0,o.guestGetTellCode)({phone:this.phone}).then((function(n){if(n&&1e4===n.code){t.isBegin=3;var i=setInterval((function(){t.number=--t.number,t.number<0&&(t.number=60,t.isBegin=1,clearInterval(i),i=null)}),1e3)}else t.isBegin=1,n.success||4107!=n.code||e.showModal({title:"很抱歉",content:"暂无找到该手机号关联的邀请请联系邀请人核实信息",showCancel:!1,confirmColor:"#02BB00"})})))},addUserHandle:function(){this.accShow=!0},addHandle:function(){this.othserUser?this.othserSfz?(this.accompanying.push({name:this.othserUser,idNo:this.othserSfz}),this.othserUser="",this.othserSfz="",this.accShow=!1):e.showToast({title:"请输入身份证",icon:"none"}):e.showToast({title:"请输入姓名",icon:"none"})},deleteHandle:function(e,t){this.accompanying.splice(t,1)},toWorkHandle:function(){e.navigateTo({url:"/pages/workLogin/index"})}}};t.default=p}).call(this,n("543d")["default"])},b7ef:function(e,t,n){"use strict";var i=n("c29a"),o=n.n(i);o.a},b9c8:function(e,t,n){"use strict";(function(e){n("d48c");i(n("66fd"));var t=i(n("a2f7"));function i(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},c29a:function(e,t,n){},e727:function(e,t,n){"use strict";var i,o=function(){var e=this,t=e.$createElement;e._self._c},s=[];n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return i}))}},[["b9c8","common/runtime","common/vendor"]]]);